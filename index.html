<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimal AR Test</title>
    <style>
        body { margin: 0; font-family: Arial; background: black; color: white; }
        #info { position: absolute; top: 20px; left: 20px; z-index: 100; background: rgba(0,0,0,0.8); padding: 15px; border-radius: 10px; }
        button { padding: 15px 30px; font-size: 18px; background: #ff6b35; color: white; border: none; border-radius: 25px; cursor: pointer; }
    </style>
</head>
<body>
    <div id="info">
        <h3>üß™ Minimal AR Test</h3>
        <p>Testing exact same approach as working WebXR samples</p>
        <button onclick="startAR()">Start AR</button>
    </div>
    
    <script>
        async function startAR() {
            const info = document.getElementById('info');
            
            try {
                info.innerHTML = '<h3>üîÑ Step 1: Checking WebXR...</h3>';
                
                if (!navigator.xr) {
                    info.innerHTML = '<h3>‚ùå WebXR not available</h3>';
                    return;
                }
                
                info.innerHTML = '<h3>üîÑ Step 2: Checking AR support...</h3>';
                
                const supported = await navigator.xr.isSessionSupported('immersive-ar');
                if (!supported) {
                    info.innerHTML = '<h3>‚ùå AR not supported</h3>';
                    return;
                }
                
                info.innerHTML = '<h3>üîÑ Step 3: Requesting session...</h3>';
                
                // Use EXACT same parameters as working sample
                const session = await navigator.xr.requestSession('immersive-ar', {
                    requiredFeatures: ['local-floor'],
                    optionalFeatures: ['bounded-floor', 'hand-tracking']
                });
                
                info.innerHTML = '<h3>üîÑ Step 4: Getting reference space...</h3>';
                
                const referenceSpace = await session.requestReferenceSpace('local-floor');
                
                info.innerHTML = '<h3>‚úÖ SUCCESS!</h3><p>AR session active with local-floor reference space</p>';
                
                // Simple test - just show we got here
                session.addEventListener('end', () => {
                    info.innerHTML = '<h3>AR Session Ended</h3><button onclick="startAR()">Try Again</button>';
                });
                
            } catch (error) {
                console.error('AR Error:', error);
                info.innerHTML = `
                    <h3>‚ùå Failed</h3>
                    <p><strong>Error:</strong> ${error.name}</p>
                    <p><strong>Message:</strong> ${error.message}</p>
                    <button onclick="startAR()">Try Again</button>
                `;
            }
        }
    </script>
</body>
</html>
